<div class="wrapper" #wrapper>
  <div class="left_side">
    <div class="navbar">
      <input value="{{ taskName }}" spellcheck="false" />
    </div>

    <div class="description">
      <input
        type="file"
        #fileInput
        multiple
        style="display: none"
        (change)="upload($event)"
      />
      <div class="button-container">
        <button mat-button (click)="fileInput.click()">
          <mat-icon>attach_file</mat-icon>Attach
        </button>
        <button
          class="add-subtopic-button"
          mat-button
          (click)="addSubtopicClicked = true"
        >
          Add Subtopic<mat-icon>add_circle</mat-icon>
        </button>

        <br />
      </div>
      <br />
      <br />

      <div class="top_side">
        <h2>{{ "description" | transloco }}</h2>
        <input placeholder="Add a description..." />
      </div>
      <!-- Add the input box here with *ngIf directive -->
      <div *ngIf="addSubtopicClicked" class="subtopic-input-container">
        <input
          type="text"
          class="subtopic-input"
          placeholder="What should be done ?"
        />
      </div>

      <br />
      <div class="attachments" *ngIf="fileUploaded">
        <h2>Attachments</h2>
        <!-- ngIf uygulanacak-->
        <ul>
          <li *ngFor="let fileData of Files">
            <img
              [src]="fileData.iconUrl"
              width="24"
              height="24"
              alt="File Icon"
            />
            {{ fileData.file.name }}
          </li>
        </ul>
      </div>
    </div>
    <br />
    <br />
    <br />
    <br />

    <div class="activityContainer">
      <div class="activity">
        <h2>
          {{ "Activity" | transloco }}
        </h2>
      </div>
      <div class="tabs">
        <div class="left-aligned-buttons">
          <label>
            <h3>Show:</h3>
          </label>
          <div class="button-container">
            <button mat-button>All</button>
            <button mat-button>Comments</button>
          </div>
        </div>
      </div>

      <br />

      <div class="footer">
        <div class="comments">
          <textarea
            placeholder="Add a comment..."
            class="small-textarea"
          ></textarea>
        </div>
      </div>

      <div class="comment_section">

        <div class="top_section">
          <div class="user_icon">
            <label>CI</label>
          </div>
          <div class="user_name">
            <label>UserName</label>
          </div>
          <div class="date_time">
            <label>29.02.1877 at 9.20AM</label>
          </div>
        </div>

        <div class="main">
          <div class="placeholder"></div>
          <label>Comment bla bla</label>
        </div>

        <div class="edit_delete_buttons">
          <div class="placeholder2"></div>
          <button mat-button>Edit</button>
          <button mat-button>Delete</button>
        </div>

      </div>
    </div>
  </div>

  <div class="right_side">
    <div class="close_icon">
      <mat-icon class="icon" (click)="onCloseDetails()">close</mat-icon>
      <!-- Close icon -->
    </div>
    <div class="container">
      <div class="top_side_details">
        <h2>Details</h2>
      </div>

      <div class="body">
        <div class="column">
          <div class="assignee card1">
            <div class="inside_card">
              <div class="label_container">
                <label>{{ "assignee" | transloco }}</label>
              </div>
              <div class="right_side_card assigned_person"></div>
            </div>
          </div>

          <div class="reporter card1">
            <div class="inside_card">
              <div class="label_container">
                <label>{{ "reporter" | transloco }}</label>
              </div>
              <div class="right_side_card reported_person"></div>
            </div>
          </div>

          <div class="priority card1">
            <div class="inside_card">
              <div class="label_container">
                <label>{{ "priority" | transloco }}</label>
              </div>
              <div class="right_side_card priority-value">
                {{ task.priority }}
              </div>
            </div>
          </div>

          <!-- Reporting -->
          <div class="priority card1">
            <div class="inside_card">
              <div class="label_container">
                <label>Reporting</label>
              </div>
              <div class="right_side_card priority-value">
                {{ tokenService.tokenFullName() }}
              </div>
            </div>
          </div>
          <div class="started_date card1">
            <div class="inside_card">
              <div class="label_container">
                <label>{{ "startedDate" | transloco }}</label>
              </div>
              <div class="right_side_card dateTime">
                <mat-form-field>
                  <input
                    matInput
                    [matDatepicker]="picker"
                    placeholder="Choose a date"
                    [formControl]="taskDueDate"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="due_date card1">
            <div class="inside_card">
              <div class="label_container">
                <label>{{ "dueDate" | transloco }}</label>
              </div>
              <div class="right_side_card dateTime">
                <mat-form-field>
                  <input
                    matInput
                    [matDatepicker]="picker"
                    placeholder="Choose a date"
                    [formControl]="taskDueDate"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
        <br />
      </div>
    </div>
  </div>
</div>
